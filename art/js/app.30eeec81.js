(function(t){function e(e){for(var i,s,a=e[0],c=e[1],u=e[2],d=0,h=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&h.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={app:0},r=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/art/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("8a23"),o=n.n(i);o.a},1:function(t,e){},"2ad6":function(t,e,n){"use strict";var i=n("b263"),o=n.n(i);o.a},3611:function(t,e,n){"use strict";var i=n("d819"),o=n.n(i);o.a},"56d7":function(t,e,n){"use strict";n.r(e),n.d(e,"bus",(function(){return St}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=(n("d3b7"),n("bc3a")),r=n.n(o),s={},a=r.a.create(s);a.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),a.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){t.axios=a,window.axios=a,Object.defineProperties(t.prototype,{axios:{get:function(){return a}},$axios:{get:function(){return a}}})},i["default"].use(Plugin);var c=Plugin,u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),n("header",[this.isLoading?n("LoadingBar"):t._e(),"beforeStart"==this.fase||"hasPainted"==this.fase?n("Painters",{key:t.componentKey,attrs:{fase:t.fase}}):t._e(),"beforeStart"!=this.fase||t.alreadyPainted?t._e():n("span",[n("button",{on:{click:t.startSession}},[t._v("Start nieuwe sessie")])]),"beforePainting"==this.fase?n("span",[n("button",{on:{click:t.startDrawing}},[t._v("Start")])]):t._e(),n("span",{staticClass:"server-message"},[t._v(" "+t._s(t.serverMessage))])],1),n("aside",{class:t.classObject},["beforePainting"==this.fase?n("div",[n("h3",[t._v("Painting settings")]),n("h4",[t._v("Full name: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),n("h4",[t._v("Country: ")]),n("vueCountryRegionSelect",{on:{"country-Set":t.countrySet}}),n("h4",[t._v("BrushWidth: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.brushwidth,expression:"brushwidth"}],attrs:{type:"number",min:"1",max:"18"},domProps:{value:t.brushwidth},on:{input:function(e){e.target.composing||(t.brushwidth=e.target.value)}}}),n("h4",[t._v("Color:")]),n("Colorpicker",{on:{"color-Set":t.colorSet}})],1):t._e()]),n("div",{attrs:{id:"painting"}},[n("DrawArt",{ref:"childComponent",attrs:{fase:t.fase,username:t.username,colorcode:t.colorcode,brushwidth:t.brushwidth,country:t.country},on:{"start-Loading":t.startLoading,"stop-Loading":t.stopLoading,"drawing-Saved":t.drawingSaved}})],1)])},l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"site-branding"},[n("p",{staticClass:"site-title left"},[n("a",{attrs:{href:"https://www.emmyzwagers.nl/",rel:"home"}},[t._v("EMMY ZWAGERS")])]),n("p",{staticClass:"site-title right"},[n("a",{attrs:{href:"http://abu.saebu.nl/doku.php?id=ict_diensten",rel:"partner site"}},[t._v("ABU SAEBU")])])])}],d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[t._v(t._s(t.status))]),n("v-stage",{ref:"stage",attrs:{config:t.configStage}},[n("v-layer",{ref:"layer"},[n("v-image",{ref:"image",attrs:{config:t.configImage},on:{mousedown:t.handleDown,touchstart:t.handleDown,mousemove:t.handleMove,touchmove:t.handleMove,mouseup:t.handleUp,touchend:t.handleUp}})],1)],1)],1)},h=[],f=(n("a9e3"),n("b383")),g=window.innerWidth-24,p=window.innerHeight-window.innerHeight/15,m={name:"DrawArt",props:{username:{type:String},colorcode:{type:String},brushwidth:{type:Number},fase:{type:String},country:{type:String}},data:function(){return{configStage:{width:g,height:p},configImage:{image:document.createElement("canvas"),width:g,height:p,x:0,y:0},timer:3+Math.floor(10*Math.random()),isPaint:!1,sessionStarted:!1,lastPointerPosition:null,context:null,prevImageDrewn:!1,image:null,errors:[],prevSession:{},konvaLineSettings:{points:[],stroke:"red",tension:1},latest:localStorage.getItem("latest"),prevDimensionsWindow:{w:g,h:p},windowWidth:0,windowHeight:0}},mounted:function(){localStorage.latest&&(this.latest=localStorage.latest),this.$nextTick((function(){}))},watch:{latest:function(t){localStorage.latest=t}},computed:{status:function(){return"beforePainting"==this.fase?"Clik on start ...":"hasPainted"==this.fase?"":"painting"==this.fase?"There are "+this.timer+" seconds left to paint...":""}},created:function(){var t=this,e=new window.Image;null==this.latest?(this.$emit("start-Loading"),this.axios.get(this.$mongoresturl+"artget.php").then((function(n){"ok"==n.data.status?null!=n?(e.src=n.data.response.imagedata,t.latest=n.data.response.imagedata,t.prevSession.username=n.data.response.username,t.prevSession.imagecreated=n.data.response.imagecreated):t.$emit("stop-Loading","No paintings yet"):(t.errors.push(n.response),t.$emit("stop-Loading",n.response))})).catch((function(e){t.errors.push("Server could not process "+e),t.$emit("stop-Loading",e)}))):(console.log("latest uit localstorage gehaald"),e.src=this.latest),e.onload=function(){t.image=e;var n=t.$refs.image.getNode();t.context=n.getContext("2d"),t.context.drawImage(t.image,0,0,g,p),t.$emit("stop-Loading")},St.$on("changePainting",(function(e){console.log("Change painting to painted by "+e);var n=new window.Image;t.$emit("start-Loading"),t.axios.get(t.$mongoresturl+"getimagedata.php?u="+e).then((function(e){"ok"==e.data.status?null!=e?n.src=e.data.response.imagedata:t.$emit("stop-Loading","Not found"):(t.errors.push(e.response),t.$emit("stop-Loading",e.response))})).catch((function(e){t.errors.push("Server could not process "+e),t.$emit("stop-Loading",e)})),n.onload=function(){t.image=n;var e=t.$refs.image.getNode();t.context=e.getContext("2d"),t.context.clearRect(0,0,g,p),t.context.drawImage(t.image,0,0,g,p),t.$emit("stop-Loading")}}))},methods:{setCookie:function(){this.$cookies.set("AXRXTX","penelope"),this.$cookies.set("wordpress","themeDefault")},resizeWindowHandler:function(){var t=this.$refs.image.getNode();if(this.context=t.getContext("2d"),console.log("orientation changed or window made bigger"),this.context.clearRect(0,0,g,p),this.windowWidth=window.innerWidth-24,this.windowHeight=window.innerHeight-window.innerHeight/15,this.prevDimensionsWindow.w<this.windowWidth||this.prevDimensionsWindow.h<this.windowHeight)try{this.context.drawImage(this.image,0,0,this.windowWidth,this.windowHeight)}catch(e){console.log("fail drawImage")}this.prevDimensionsWindow.w=this.windowWidth,this.prevDimensionsWindow.h=this.windowHeight},savePaintingAlt:function(){var t=this,e=document.querySelector("canvas"),n=e.toDataURL();this.$emit("drawing-Saved",""),this.$emit("start-Loading"),this.axios.post(this.$mongoresturl+"artsave.php",f.stringify({username:this.username,country:this.country,imagedata:n})).then((function(e){"ok"==e.data.status?(St.$emit("newPainter"),t.$emit("stop-Loading","New painting has been saved")):(t.errors.push(e.response),t.$emit("stop-Loading",e.response))})).catch((function(e){t.errors.push("Server could not process, "+e),t.$emit("stop-Loading",e)}))},downloadURI:function(t,e){var n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},handleDown:function(){var t=this;if("painting"==this.fase){if(!this.sessionStarted){var e=setInterval((function(){return--t.timer}),1e3);setTimeout((function(){clearInterval(e),t.savePaintingAlt(),t.sessionStarted=!1,t.isPaint=!1,t.fase="hasPainted",t.setCookie()}),1e3*this.timer)}this.sessionStarted=!0,this.isPaint=!0,this.lastPointerPosition=this.$refs.stage.getNode().getPointerPosition(),this.prevImageDrewn||(this.addPointToLine(this.lastPointerPosition),this.prevImageDrewn=!0)}},addPointToLine:function(t){this.konvaLineSettings.points.push(t.x,t.y)},handleUp:function(){this.isPaint=!1},handleMove:function(){if(this.isPaint){var t=this.$refs.image.getNode();this.context=t.getContext("2d"),this.context.globalAlpha=.8,this.context.strokeStyle=this.colorcode,this.context.lineJoin="round",this.context.lineWidth=this.brushwidth,this.context.beginPath();var e={x:this.lastPointerPosition.x-this.$refs.image.getNode().x(),y:this.lastPointerPosition.y-this.$refs.image.getNode().y()};this.context.moveTo(e.x,e.y);var n=this.$refs.stage.getNode().getPointerPosition();e={x:n.x-this.$refs.image.getNode().x(),y:n.y-this.$refs.image.getNode().y()},this.context.lineTo(e.x,e.y),this.context.closePath(),this.context.stroke(),this.addPointToLine(n),this.lastPointerPosition=n,this.$refs.image.getNode().draw()}}},beforeDestroy:function(){window.removeEventListener("resize",this.resizeWindowHandler)}},v=m,w=n("2877"),y=Object(w["a"])(v,d,h,!1,null,"437ac1ff",null),b=y.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("pre",[t._v(t._s(t.showColor))]),n("v-row",[n("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"20",md:"20"}},[n("v-color-picker",{on:{change:t.colorPicked},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1),n("v-col",{attrs:{cols:"20",md:"20"}},[n("v-sheet",{staticClass:"pa-4",attrs:{light:""}})],1)],1)],1)},x=[],S=(n("13d5"),n("b680"),n("b64b"),{data:function(){return{type:"hex",hex:"#FF00FF",hexa:"#FF00FFFF",rgba:{r:255,g:0,b:255,a:1},hsla:{h:300,s:1,l:.5,a:1},hsva:{h:300,s:1,v:1,a:1}}},computed:{color:{get:function(){return this[this.type]},set:function(t){this[this.type]=t}},showColor:function(){var t=this;return this.$emit("color-Set",this.color),console.log(this.color),"string"===typeof this.color?this.color:JSON.stringify(Object.keys(this.color).reduce((function(e,n){return e[n]=Number(t.color[n].toFixed(2)),e}),{}),null,2)}},methods:{colorPicked:function(){}}}),$=S,_=(n("3611"),n("6544")),k=n.n(_),C=n("7496"),L=n("62ad"),N=n("03a4"),O=n("0fd9"),j=n("8dd9"),D=Object(w["a"])($,P,x,!1,null,"31d16947",null),I=D.exports;k()(D,{VApp:C["a"],VCol:L["a"],VColorPicker:N["a"],VRow:O["a"],VSheet:j["a"]});var M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"loading-spinner"},t._l(t.circles,(function(e,i){return n("circle",{key:i,attrs:{cx:t.circlePositions[i]&&t.circlePositions[i].x,cy:t.circlePositions[i]&&t.circlePositions[i].y,r:e.radius,fill:e.color}})})),0)},A=[],W=(n("4160"),n("d81d"),n("159b"),n("5530")),E=50,F=50,R=20;function T(t,e,n){return{x:n.x+t*Math.cos(B(e)),y:n.y+t*Math.sin(B(e))}}function B(t){return t*Math.PI/180}function H(t){var e=360/t.circles.length,n={};return t.circles.forEach((function(t,i){n[i]=T(R,e*i,{x:E,y:F})})),n}var U={data:function(){return{circles:[{color:"#E0F2F1",radius:0},{color:"#B2DFDB",radius:0},{color:"#80CBC4",radius:0},{color:"#4DB6AC",radius:0},{color:"#26A69A",radius:0},{color:"#00897B",radius:0},{color:"#00796B",radius:0},{color:"#00695C",radius:0},{color:"#004D40",radius:0}],counter:0,interval:null}},computed:{circlePositions:H},created:function(){var t=this;this.interval=setInterval((function(){t.counter++,t.circles=t.circles.map((function(e,n){return Object(W["a"])({},e,{radius:(t.counter+n)%8})}))}),70)},destroyed:function(){clearInterval(this.interval)}},V=U,z=(n("fbb8"),Object(w["a"])(V,M,A,!1,null,"41ac6a67",null)),X=z.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"painters"}},[n("h3",[t._v("ONLINE CANVAS")]),n("h4",[t._v("artists")]),t.painters.length>0?n("ul",t._l(t.painters,(function(e,i){return n("li",{key:e.username,staticClass:"painters"},[n("span",[n("country-flag",{attrs:{country:e.country,size:"small"}}),t._v(t._s(e.imagecreated))],1),n("button",{class:{active:t.activePainter===e.username},on:{click:function(e){return t.showPainterPainting(i)}}},[t._v(" "+t._s(e.username))])])})),0):t._e(),0==t.painters.length?n("span",[t._v("Nobody has started painting")]):t._e()])},K=[],q=n("eea2"),G={components:{CountryFlag:q["a"]},data:function(){return{painters:null,errors:[],activePainter:null}},props:{fase:{type:String}},computed:{},created:function(){var t=this;this.laadPainters(),St.$on("newPainter",(function(){console.log("ververs painters..."),t.laadPainters()}))},methods:{laadPainters:function(){var t=this;console.log("Painters laden..."),this.axios.get(this.$mongoresturl+"artists.php").then((function(e){"ok"==e.data.status?null!=e?t.painters=e.data.response:t.info=e.status:t.errors.push(e.response)})).catch((function(e){t.errors.push("Server could not process "+e)}))},showPainterPainting:function(t){St.$emit("changePainting",this.painters[t].username),this.activePainter=this.painters[t].username}}},Y=G,Z=(n("2ad6"),Object(w["a"])(Y,J,K,!1,null,"0c0cf182",null)),Q=Z.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("country-select",{attrs:{topCountry:"NL",placeholder:"Select your country"},on:{change:t.countrySelected},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}})},et=[],nt={data:function(){return{country:"",region:""}},methods:{countrySelected:function(){console.log("change triggered"),this.$emit("country-Set",this.country)}},beforeDestroy:function(){console.log("change triggered"),this.$emit("country-Set",this.country)}},it=nt,ot=Object(w["a"])(it,tt,et,!1,null,null,null),rt=ot.exports,st=n("8055"),at=n.n(st),ct={rememberUpgrade:!0,transports:["websocket"],secure:!0,rejectUnauthorized:!1},ut=at()("//artsocketpainting.herokuapp.com:45877",ct),lt={name:"App",components:{DrawArt:b,Colorpicker:I,LoadingBar:X,Painters:Q,vueCountryRegionSelect:rt},data:function(){return{username:"",componentKey:0,colorcode:"#ff0000",fase:"beforeStart",isLoading:!1,brushwidth:5,drawingMessage:"",country:"NL",serverMessage:"...",isConnected:!1}},computed:{classObject:function(){return{active:"beforePainting"==this.fase,hide:"beforePainting"!=this.fase}},alreadyPainted:function(){return this.$cookies.config("30d"),!(!this.$cookies.get("wordpress")&&!this.$cookies.get("AXRXTX"))}},created:function(){var t=this;ut.emit("painterOnline",""),window.onbeforeunload=function(){return ut.emit("painterOffline",""),localStorage.removeItem("latest"),!1},ut.on("message",(function(e){t.serverMessage=e.message}))},mounted:function(){var t=this;ut.on("connect",(function(){t.serverMessage="connected"}))},methods:{countrySet:function(t){console.log("Country geselecteerd "+t),this.country=t},forceRenderer:function(){this.componentKey+=1},colorSet:function(t){this.colorcode=t},startDrawing:function(){this.username.length>2?this.fase="painting":this.username="?",ut.emit("painterPainting",this.username)},startSession:function(){ut.emit("painterStarted",""),this.fase="beforePainting"},drawingSaved:function(t){ut.emit("painterNewPainting",this.username),this.fase="hasPainted",this.drawingMessage=t,this.forceRenderer()},startLoading:function(){this.isLoading=!0},stopLoading:function(t){this.isLoading=!1,t&&alert(t)}}},dt=lt,ht=(n("034f"),Object(w["a"])(dt,u,l,!1,null,null,null)),ft=ht.exports,gt=n("7591"),pt=n.n(gt),mt=n("f309");i["default"].use(mt["a"]);var vt=new mt["a"]({}),wt=n("2b27"),yt=n.n(wt),bt=n("d21d"),Pt=n.n(bt);i["default"].component("country-flag",q["a"]),i["default"].use(Pt.a),i["default"].use(yt.a),i["default"].use(c),i["default"].use(pt.a),i["default"].config.productionTip=!1;var xt=location.hostname;i["default"].prototype.$mongoresturl="localhost"==xt?"http://localhost:8088/mongorestphp/":"//saebu.nl/mongorest/";var St=new i["default"];new i["default"]({vuetify:vt,axios:c,VueCookies:yt.a,vueCountryRegionSelect:Pt.a,render:function(t){return t(ft)}}).$mount("#app")},"8a23":function(t,e,n){},b263:function(t,e,n){},d819:function(t,e,n){},fbb8:function(t,e,n){"use strict";var i=n("ff36"),o=n.n(i);o.a},ff36:function(t,e,n){}});
//# sourceMappingURL=app.30eeec81.js.map